#░██╗░░░░░░░██╗██╗███╗░░██╗██████╗░░█████╗░░██╗░░░░░░░██╗░██████╗██████╗░██╗░░░██╗██╗░░░░░███████╗
#░██║░░██╗░░██║██║████╗░██║██╔══██╗██╔══██╗░██║░░██╗░░██║██╔════╝██╔══██╗██║░░░██║██║░░░░░██╔════╝
#░╚██╗████╗██╔╝██║██╔██╗██║██║░░██║██║░░██║░╚██╗████╗██╔╝╚█████╗░██████╔╝██║░░░██║██║░░░░░█████╗░░
#░░████╔═████║░██║██║╚████║██║░░██║██║░░██║░░████╔═████║░░╚═══██╗██╔══██╗██║░░░██║██║░░░░░██╔══╝░░
#░░╚██╔╝░╚██╔╝░██║██║░╚███║██████╔╝╚█████╔╝░░╚██╔╝░╚██╔╝░██████╔╝██║░░██║╚██████╔╝███████╗███████╗
#░░░╚═╝░░░╚═╝░░╚═╝╚═╝░░╚══╝╚═════╝░░╚════╝░░░░╚═╝░░░╚═╝░░╚═════╝░╚═╝░░╚═╝░╚═════╝░╚══════╝╚══════╝
#
# Hyprland Window Rules - 已迁移至 0.53+ 新语法
# 参考: https://wiki.hyprland.org/Configuring/Window-Rules/
#
# 语法变更说明 (0.53+):
#   - windowrulev2          → windowrule
#   - class:<pattern>       → match:class <pattern>
#   - float / maximize      → float on / maximize on  (布尔值须显式声明)
#   - nofocus               → no_focus on
#   - noanim                → animation none
#   - noinitialfocus        → no_initial_focus on
#   - stayfocused           → stay_focused on
#   - nomaxsize             → max_size 99999 99999
#   - layerrule = blur, X   → layerrule = blur on, match:namespace X
#   - layerrule = ignorezero, X → layerrule = ignore_zero on, match:namespace X
#   - layerrule = xray 0, X → layerrule = xray off, match:namespace X

# ========================================
# 浮动窗口规则
# ========================================

windowrule = match:class ^(org\.kde\.polkit-kde-authentication-agent-1)$, float on
windowrule = match:class ^(imv)$, float on
windowrule = match:class ^(scrcpy)$, float on
windowrule = match:class ^(wlogout)$, float on
windowrule = match:class ^(Emulator)$, float on
windowrule = match:class ^(vlc)$, float on

# ========================================
# WPS Office 规则
# ========================================

windowrule {
    name = wps-writer-rules
    match:class = ^(wps)$
    float = on
    maximize = on
}

windowrule {
    name = wps-spreadsheet-rules
    match:class = ^(et)$
    float = on
    maximize = on
}

windowrule {
    name = wps-pdf-rules
    match:class = ^(wpspdf)$
    float = on
    maximize = on
}

# ========================================
# 微信规则
# ========================================

windowrule = match:class ^(wechat)$, float on

# ========================================
# XWayland Video Bridge 规则
# ========================================

windowrule {
    name = xwaylandvideobridge-rules
    match:class = ^(xwaylandvideobridge)$
    opacity = 0.0 override 0.0 override
    animation = none
    no_focus = on
    no_initial_focus = on
}

# ========================================
# 其他窗口规则
# ========================================

# Rofi 保持焦点，防止点击其他区域时失焦
windowrule = match:class ^(Rofi)$, stay_focused on

# lx-music-desktop 不限制最大尺寸
windowrule = match:class ^(lx-music-desktop)$, max_size 99999 99999

# ========================================
# Layer 规则
# ========================================

# Waybar
layerrule = blur on, match:namespace waybar
layerrule = ignore_alpha on, match:namespace waybar

# Anyrun
layerrule = blur on, match:namespace anyrun

# Notifications (mako / dunst / swaync 等)
layerrule = blur on, match:namespace notifications
layerrule = ignore_alpha on, match:namespace notifications
layerrule = xray off, match:namespace notifications

# GTK Layer Shell
layerrule = blur on, match:namespace gtk-layer-shell
layerrule = ignore_alpha on, match:namespace gtk-layer-shell
layerrule = xray off, match:namespace gtk-layer-shell

# Avizo (音量/亮度 OSD)
layerrule = blur on, match:namespace avizo
layerrule = ignore_alpha on, match:namespace avizo
layerrule = xray off, match:namespace avizo
